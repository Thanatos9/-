#include<stdio.h>
#include<windows.h>
#pragma comment(lib, "winmm.lib")
#include<stdlib.h>
#include<time.h>
//***********************************************************************
//                             函数声明
//***********************************************************************
void test1();
void test2();
void test3();
void test4();
void test5();
void test6();
void test7();
void test8();
void finish();
//***********************************************************************
//                             文字变色
//***********************************************************************
void color()
{
	Sleep(500);
	system("color 01");
	Sleep(500);
	system("color 02");
	Sleep(500);
	system("color 03");
	Sleep(500);
	system("color 04");
	Sleep(500);
	system("color 0E");
	Sleep(500);
}
//***********************************************************************
//                           进度条系列
//***********************************************************************

void Gotoxy(int x, int y)//光标定位
{
	HANDLE hout;	//定义句柄变量hout
	COORD coord;	//定义结构体coord
	coord.X = x;
	coord.Y = y;
	hout = GetStdHandle(STD_OUTPUT_HANDLE);		//获得标准输出（屏幕）句柄
	SetConsoleCursorPosition(hout, coord);		//移动光标
}

void HideCursor()//隐藏光标
{
	CONSOLE_CURSOR_INFO cursor_info = {1, 0};	//后边的0代表光标不可见
	SetConsoleCursorInfo(GetStdHandle(STD_OUTPUT_HANDLE), &cursor_info);
}

void ShowCursor()//显示光标
{
	CONSOLE_CURSOR_INFO cursor_info = {1, 0};	//后边的0代表光标不可见
	SetConsoleCursorInfo(GetStdHandle(STD_OUTPUT_HANDLE), &cursor_info);
}

void progress()
{
	int len;
	HideCursor();
	printf("╔═════════════════════════╗");
	putchar('\n');
	printf("║                                                  ║");
	putchar('\n');
	printf("╚═════════════════════════╝");
	for(len=1;len<=25;len++)
	{
		Gotoxy(2*len, 13);
		printf("█");
		Gotoxy(21, 15);
		printf("已完成%d%%", 4 * len);
		Sleep(100);
		ShowCursor();
	}
}
//***********************************************************************
void test1()
{
	system("cls");
	puts("你已经几天没吃饭了，刚刚还进行了大逃亡！\n你快虚脱了。正在你无力地向前走的时候。\n你看到孤岛上有一个椰子。（奇迹啊，椰子啊，我饿了- -）\n你拿起旁边的石头把它敲开口，大胆的喝了下去。\n这次的没有毒，而且帮你解了渴。\n没吃没喝毕竟不好受，你要从这孤岛上找食物！\n你伸着懒腰走进树丛，听到“沙沙”的树叶声。\n你想：难道有别人在这儿？\n正在你百般困惑的时候，一个面容慈祥的老婆婆朝你走了过来。\n“孩子，快，你饿坏了吧！我是刚刚送你来的女孩的奶奶，我接到消息就来给你送吃的！”\n老婆婆捂着脸，（用纱巾……）递给你一个烤鱼。\n烤鱼的味道真是让你受不了。\n可你又一想，万一有毒咋么办！？");
	int m;
	while(m!=2)
	{
		m=0;
		puts("1.谢绝老婆婆");
		puts("2.饿坏了，吃掉那条鱼");
		scanf("%d",&m);
		while(getchar()!='\n');
		switch(m)
		{
		case 1:test2();break;
		case 2:puts("你狼吞虎咽的吃完了烤鱼，最后中毒而死。");finish();
		default:puts("别乱来o.o，再给你一次机会");
		}
	}
}
//***********************************************************************
void test2()
{
	system("cls");
	puts("你先谢过老婆婆。说你还有事，必须先走了。\n老婆婆惋惜的叹了一口气，走开了。\n你继续疲惫的走着。\n你刚巧路过一个鱼很多的地方。你走到岸边蹲下身子。\n你准备下水摸鱼了！摸了好久好久，你才抓到了一条大鱼。\n没有火，你准备钻木取火。又是过了好久，你吃着自己烤出来的大鱼。\n心里又放心又满足。\n冒险了一天，天黑了下来，你要找一个地方安居。\n树影在这时候就像鬼影，走了几圈也没见到老婆婆。\n也许老婆婆早就坐船离开了。你实在是困极了。\n你看着眼前两个地方，不知道该睡在哪。\n一个是树丛里，温暖而且还有树遮阴。\n一个是紧靠水边的岸上，容易发现敌人。");
	int m;
	while(m!=1)
	{
		m=0;
		puts("1.树丛");
		puts("2.岸上");
		scanf("%d",&m);
		while(getchar()!='\n');
		switch(m)
		{
		case 1:puts("恭喜你，喂孤魂野鬼去吧！");finish();
		case 2:test3();break;
		default:puts("别乱来o.o，再给你一次机会");
		}
	}
}
//***********************************************************************
void test3()
{
	system("cls");
	puts("在你睡了几个小时后，还是半夜。\n你突然听到一些声音，从睡梦中惊醒过来。\n你看到一些披头散发的鬼魂。他们嘴里还嘟噜着什么。\n这不是关键！关键是你要抓紧跑！你站起身来马不停蹄的跑。\n你头也不回，最后被一块石头绊倒在地。\n鬼魂被甩掉了，可你又到了一个不认识的地方，虽然还是在岛上。\n你又看到了那个婆婆，那个婆婆好心伸手来帮助你。\n你并不知道这个婆婆到底是谁，她是不是要害你。\n就在你准备不让婆婆帮的时候，你看到不远处，鬼魂跟来了。\n你吓得全身发软，反正都是未知数，还不如投靠老婆婆！\n你抓住老婆婆的手，老婆婆接着就把你拽了起来。\n你很奇怪老婆婆为什么力气这么大，但现在没时间问。\n你不要命的跑，跑了很久很久，直到你累的站不起身。\n你发现这次鬼魂真的没了，老婆婆也没了。\n你拍着自己的胸脯：幸好没睡在树丛里……\n可这时候又来了两个人，一个是刚才的婆婆，一个是满脸铁青的女人。\n女人惊恐地对着你说：\n快跑，这是个巫婆！");
	int m;
	while(m!=2)
	{
		m=0;
		puts("1.婆婆");
		puts("2.女人");
		scanf("%d",&m);
		while(getchar()!='\n');
		switch(m)
		{
		case 1:test4();break;
		case 2:puts("你跟着女人逃跑了，可她却在你不注意的时候拿出刀子，把你捅了一刀又一刀。\n她说：“哼。我饿极了！我非吃了你！”（话说这个女人真的很凶残啊！）");finish();
		default:puts("别乱来o.o，再给你一次机会");
		}
	}
}
//***********************************************************************
void test4()
{
	system("cls");
	puts("你断然跟着婆婆走，但不知道是何下场。\n婆婆领着你到了她的家里，她对你说了许多许多。\n“孩子啊。我是女孩的奶奶！刚才的鱼是我不小心把毒洒下去，我刚查了药铺。才知道！幸亏你没吃！知道吗，女孩的船还是我做的……\n你信我就对了，那女人饿的都疯了！每次女孩都是把被救的人放到我这儿，但是因为我马上要离开。\n看来你真的要自己闯喽。记得选对的！拜拜！我只能救你一次！”\n你又问了婆婆为什么力气大，婆婆说，她从小对药有兴趣，所以才开了药铺，来这个岛上找药。\n婆婆吃了她自制的大力丸，本想试一试，结果正好碰上了你。\n你暗自笑自己差点中了女人的圈套（可很多人死了……），跟婆婆道了别。\n你每天过着，吃鱼喝椰子汁的生活，几乎忘记了要回家的事情。\n你在岛上过得这么好，你都不知道还回不回去了！\n可你又一想，你亲戚对你也挺好，但是却拘束着自己，还不如岛上的生活自由自在！");
	int m;
	while(m!=1)
	{
		m=0;
		puts("1.在岛上度日");
		puts("2.抓紧回家");
		scanf("%d",&m);
		while(getchar()!='\n');
		switch(m)
		{
		case 1:puts("这是孤魂岛，你过了几天悠闲日子，没想到落入鬼口，最后被鬼吃掉。");finish();
		case 2:test5();break;
		default:puts("别乱来o.o，再给你一次机会");
		}
	}
}
//***********************************************************************
void test5()
{
	system("cls");
	puts("你开始收集木板，可木板却没那么多。\n看来还要等些时日，可你早就吓得不行，这里可有鬼魂！\n就连唯一能救自己的老婆婆都走了！\n深夜，你思考着怎么才能抓紧回到家中。\n就在此时，一个孤魂野鬼朝你飘来~~~\n你猛地一回头，被吓得差点晕倒。你爬起来没命的跑。\n可那只鬼怎么也甩不掉。\n你发现了你身上背着的老婆婆给的背包。\n里面有几样东西。\n指南针、枪（有子弹）、小刀、蜡烛、打火机。（老婆婆你这个好人- -）\n你思来想去，能用的也就几个。");
	int m;
	while(m!=1||3)
	{
		m=0;
		puts("1.蜡烛");
		puts("2.打火机");
		puts("3.小刀（鬼能透过去吧。）");
		scanf("%d",&m);
		while(getchar()!='\n');
		switch(m)
		{
		case 1:puts("你傻不拉几的拿一蜡烛……\n你被吃了，恭喜你。");finish();
		case 2:test6();break;
		case 3:puts("你傻不拉几的拿小刀去刺。\n穿了……你被吃了，祝贺你！");finish();
		default:puts("别乱来o.o，再给你一次机会");
		}
	}
}
//***********************************************************************
void test6()
{
	system("cls");
	puts("你拿起打火机，生起了火。鬼显然不知道这是个毛玩意~\n伸手去碰，结果化成了灰烬。\n虚惊一场，你拍了拍自己的胸脯，期待着天亮。\n天终于亮了，你先是吃了一条鱼，然后开始准备回家。\n可是由于你这几天从没睡好过，已经没多少精力了。\n你看到面前有一艘现成的小船，但是好几个地方打了补丁。\n你看到补丁打得还算牢固。你有看到水面上漂着一个很粗的木棍。\n也许你可以抓着木棍离开。可是你觉得那样太费力了。\n你想去坐船。可你不知道那船是不是别人故意来坑你的。");
	int m;
	while(m!=1)
	{
		m=0;
		puts("1.坐船");
		puts("2.抓着木棍");
		scanf("%d",&m);
		while(getchar()!='\n');
		switch(m)
		{
		case 1:puts("你坐上了小船，可惜，那些补丁居然漏了！你最终被淹死了。");finish();
		case 2:test7();break;
		default:puts("别乱来o.o，再给你一次机会");
		}
	}
}
//***********************************************************************
void test7()
{
	system("cls");
	puts("你犹豫不决的抱住木棍，跳进了水里。\n想着对这个小岛这么快就走了，你居然还想再刺激点。\n老天成全了你- -。你一个抓不稳，丢去了木棍。\n你瞎扑腾，终于扑腾到了岸上。结果你又回到了孤岛！\n你急的都快跪到了地上，心里默念：老天啊，我开玩笑的！我不要刺激了！我要回家！\n你急的哭了出来，这个时候，你被一棵树上的字条给吸引了。\n你慢慢走了过去，读出上面的字：\n你别想逃脱这里，这里是逃不出去的！\n但我也很有原则，看到树后面的路标了么！它将指引你离开。\n如果你能选择对的话。\n哈哈哈哈【奸笑】\n你看了看路标，一个指左，一个指右。\n\n左边和右边几乎没什么差距，只是左边一棵树上有血做的标记，右边却没有。");
	int m;
	while(m!=2)
	{
		m=0;
		puts("1.左");
		puts("2.右");
		scanf("%d",&m);
		while(getchar()!='\n');
		switch(m)
		{
		case 1:test8();break;
		case 2:puts("不知道大家有没有这种感觉？就是看着都会怕！话说我就这样啊。。\n你走向了没有血迹的那一条路，很可惜，你被藏在树后面的鬼吃掉了。");finish();
		default:puts("别乱来o.o，再给你一次机会");
		}
	}
}
//***********************************************************************
void test8()
{
	system("cls");
	puts("你战战兢兢地走向有血迹的那条路，希望能看到好的一面。\n渐渐地，你来到一个不认识的地方。（这岛还真尼玛大！）\n这里没有人，没有树，没有水。你渐渐意识到你离开了那座小岛。\n你很感谢当初你做的选择，你离开了，你成功过了第二关！");
	Sleep(3000);
	puts("you are the winner");
	Sleep(3000);
	puts("敬请期待第三季——骷髅之家");
	Sleep(2000);
	puts("全文摘自炫舞体验服吧某网友");
	Sleep(2000);
	puts("thanks for play");
	Sleep(2000);
	exit(0);
}
//***********************************************************************
void finish()
{
	PlaySound("finish.wav", NULL, SND_ASYNC | SND_LOOP);//添加音乐
	puts("game over");
	Sleep(5000);
	exit(0);
}
//***********************************************************************
//***********************************************************************
//***********************************************************************
//***********************************************************************
//***********************************************************************
//***********************************************************************
//***********************************************************************
//***********************************************************************
//***********************************************************************
//***********************************************************************
//***********************************************************************
//***********************************************************************
int main()
{
	system("mode con cols=55 lines=30");
	puts("*******************************************************");
	puts("                欢迎来到神奇的冒险世界 \n        ");
	puts("*******************************************************");
	color();//文字变色
	puts("经历了千辛万苦，你竟然活下来了……其实就是几次退出而已…\n咳咳…终于来到了第二关\n");
	Sleep(500);
	puts("             如果准备好了就按下你的回车吧！    ");
	getchar();
	progress();//进度条
	PlaySound("faster1.wav", NULL, SND_ASYNC | SND_LOOP);//添加音乐
	Sleep(500);
	test1();
	return 0;
}
